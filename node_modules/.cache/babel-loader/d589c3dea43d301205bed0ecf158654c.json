{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst formats_1 = require(\"./formats\");\n\nconst limit_1 = require(\"./limit\");\n\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\n\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\n\nconst formatsPlugin = function (ajv) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    keywords: true\n  };\n\n  if (Array.isArray(opts)) {\n    addFormats(ajv, opts, formats_1.fullFormats, fullName);\n    return ajv;\n  }\n\n  const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n  const list = opts.formats || formats_1.formatNames;\n  addFormats(ajv, list, formats, exportName);\n  if (opts.keywords) limit_1.default(ajv);\n  return ajv;\n};\n\nformatsPlugin.get = function (name) {\n  let mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"full\";\n  const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n  const f = formats[name];\n  if (!f) throw new Error(`Unknown format \"${name}\"`);\n  return f;\n};\n\nfunction addFormats(ajv, list, fs, exportName) {\n  var _a;\n\n  var _b;\n\n  (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : _b.formats = codegen_1._`require(\"ajv-formats/dist/formats\").${exportName}`;\n\n  for (const f of list) ajv.addFormat(f, fs[f]);\n}\n\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = formatsPlugin;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;;;;;AAAA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AAQA,MAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAGA,MAAA,SAAA,GAAA,OAAA,CAAA,0BAAA,CAAA;;AAgBA,MAAM,QAAQ,GAAG,IAAI,SAAA,CAAA,IAAJ,CAAS,aAAT,CAAjB;AACA,MAAM,QAAQ,GAAG,IAAI,SAAA,CAAA,IAAJ,CAAS,aAAT,CAAjB;;AAEA,MAAM,aAAa,GAAkB,UACnC,GADmC,EAG5B;AAAA,MADP,IACO,uEADsB;AAAC,IAAA,QAAQ,EAAE;AAAX,GACtB;;AACP,MAAI,KAAK,CAAC,OAAN,CAAc,IAAd,CAAJ,EAAyB;AACvB,IAAA,UAAU,CAAC,GAAD,EAAM,IAAN,EAAY,SAAA,CAAA,WAAZ,EAAyB,QAAzB,CAAV;AACA,WAAO,GAAP;AACD;;AACD,QAAM,CAAC,OAAD,EAAU,UAAV,IACJ,IAAI,CAAC,IAAL,KAAc,MAAd,GAAuB,CAAC,SAAA,CAAA,WAAD,EAAc,QAAd,CAAvB,GAAiD,CAAC,SAAA,CAAA,WAAD,EAAc,QAAd,CADnD;AAEA,QAAM,IAAI,GAAG,IAAI,CAAC,OAAL,IAAgB,SAAA,CAAA,WAA7B;AACA,EAAA,UAAU,CAAC,GAAD,EAAM,IAAN,EAAY,OAAZ,EAAqB,UAArB,CAAV;AACA,MAAI,IAAI,CAAC,QAAT,EAAmB,OAAA,CAAA,OAAA,CAAY,GAAZ;AACnB,SAAO,GAAP;AACD,CAdD;;AAgBA,aAAa,CAAC,GAAd,GAAoB,UAAC,IAAD,EAAwD;AAAA,MAArC,IAAqC,uEAAlB,MAAkB;AAC1E,QAAM,OAAO,GAAG,IAAI,KAAK,MAAT,GAAkB,SAAA,CAAA,WAAlB,GAAgC,SAAA,CAAA,WAAhD;AACA,QAAM,CAAC,GAAG,OAAO,CAAC,IAAD,CAAjB;AACA,MAAI,CAAC,CAAL,EAAQ,MAAM,IAAI,KAAJ,CAAU,mBAAmB,IAAI,GAAjC,CAAN;AACR,SAAO,CAAP;AACD,CALD;;AAOA,SAAS,UAAT,CAAoB,GAApB,EAA8B,IAA9B,EAAkD,EAAlD,EAAsE,UAAtE,EAAsF;;;;;AACpF,GAAA,EAAA,GAAA,CAAA,EAAA,GAAA,GAAG,CAAC,IAAJ,CAAS,IAAT,EAAc,OAAd,MAAqB,IAArB,IAAqB,EAAA,KAAA,KAAA,CAArB,GAAqB,EAArB,GAAqB,EAAA,CAAP,OAAO,GAAK,SAAA,CAAA,CAAC,uCAAuC,UAAU,EAA5E;;AACA,OAAK,MAAM,CAAX,IAAgB,IAAhB,EAAsB,GAAG,CAAC,SAAJ,CAAc,CAAd,EAAiB,EAAE,CAAC,CAAD,CAAnB;AACvB;;AAED,MAAM,CAAC,OAAP,GAAiB,OAAO,GAAG,aAA3B;AACA,MAAM,CAAC,cAAP,CAAsB,OAAtB,EAA+B,YAA/B,EAA6C;AAAC,EAAA,KAAK,EAAE;AAAR,CAA7C;AAEA,OAAA,CAAA,OAAA,GAAe,aAAf","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst formats_1 = require(\"./formats\");\nconst limit_1 = require(\"./limit\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\nconst formatsPlugin = (ajv, opts = { keywords: true }) => {\n    if (Array.isArray(opts)) {\n        addFormats(ajv, opts, formats_1.fullFormats, fullName);\n        return ajv;\n    }\n    const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n    const list = opts.formats || formats_1.formatNames;\n    addFormats(ajv, list, formats, exportName);\n    if (opts.keywords)\n        limit_1.default(ajv);\n    return ajv;\n};\nformatsPlugin.get = (name, mode = \"full\") => {\n    const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n    const f = formats[name];\n    if (!f)\n        throw new Error(`Unknown format \"${name}\"`);\n    return f;\n};\nfunction addFormats(ajv, list, fs, exportName) {\n    var _a;\n    var _b;\n    (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : (_b.formats = codegen_1._ `require(\"ajv-formats/dist/formats\").${exportName}`);\n    for (const f of list)\n        ajv.addFormat(f, fs[f]);\n}\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = formatsPlugin;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}